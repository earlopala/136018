DROP DATABASE IF EXISTS `cholera`;

CREATE DATABASE IF NOT EXISTS `cholera`;

CREATE TABLE IF NOT EXISTS `cholera`.`users` (`User_ID` INT NOT NULL AUTO_INCREMENT , `Fullname` TEXT NOT NULL , `Phone_Number` TEXT NOT NULL , `Email_Address` TEXT NOT NULL , `Password` TEXT NOT NULL , `User_Type` TEXT NOT NULL , PRIMARY KEY (`User_ID`), UNIQUE (`Email_Address`)) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `cholera`.`symptoms` (`Symptom_ID` INT NOT NULL AUTO_INCREMENT , `User_ID` INT NOT NULL, `Details` TEXT NOT NULL , `Status` TEXT NOT NULL DEFAULT 'Pending',`Created_At` DATE NOT NULL DEFAULT DATE(NOW()), PRIMARY KEY (`Symptom_ID`)) ENGINE = InnoDB;

CREATE TABLE IF NOT EXISTS `cholera`.`diagnostic` (`Diagnostic_ID` INT NOT NULL AUTO_INCREMENT , `User_ID` INT NOT NULL, `Symptom_ID` INT NOT NULL , `Results` TEXT NOT NULL , `File` TEXT NOT NULL , `Created_At` DATE NOT NULL DEFAULT DATE(NOW()) , PRIMARY KEY (`Diagnostic_ID`)) ENGINE = InnoDB;

INSERT INTO `cholera`.`users`(`User_ID`, `Fullname`, `Phone_Number`, `Email_Address`, `Password`, `User_Type`) VALUES ('NULL','Opala Earl Wanjala','0728374828','earl@gmail.com',md5('136018'),'Administrator'); 